<?php

/**
 * @file
 * Provides legacy token support.
 */

/**
 * Implements hook_token_info().
 */
function dvg_authentication_tokens_legacy_token_info() {
  return [
    'tokens' => [
      'dvg' => [
        'bsn' => [
          'name' => t('BSN'),
          'description' => t('The BSN of the logged in user.'),
        ],
        'kvk-nummer' => [
          'name' => t('KvK number'),
          'description' => t('The KvK number of the logged in user.'),
        ],
        'kvk-vestigings-nummer' => [
          'name' => t('KvK Department number'),
          'description' => t('The KvK Department number of the logged in user.'),
        ],
      ],
    ],
  ];
}

/**
 * Implements hook_tokens().
 *
 * {@inheritdoc}
 */
function dvg_authentication_tokens_legacy_tokens($type, $tokens, array $data = [], array $options = []) {
  $replacements = [];

  if ($type === 'dvg') {
    foreach ($tokens as $name => $original) {
      switch ($name) {
        case 'bsn':
          $replacements[$original] = dvg_authentication_get_external_user_value('bsn');
          break;

        case 'kvk-nummer':
          $replacements[$original] = dvg_authentication_get_external_user_value('kvk_number');
          break;

        case 'kvk-vestigings-nummer':
          $replacements[$original] = dvg_authentication_get_external_user_value('kvk_department_number');
          break;
      }
    }
  }

  return $replacements;
}
